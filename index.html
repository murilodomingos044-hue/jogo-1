<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Futebol 3D Ultimate</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
<style>
body{margin:0;overflow:hidden;background:#111;font-family:'Bangers',cursive}
.menu{
 position:fixed;inset:0;background:#111;color:#fff;
 display:flex;flex-direction:column;align-items:center;justify-content:center;
 z-index:100
}
.menu h1{font-size:64px;margin-bottom:20px}
.menu button{font-size:28px;padding:12px 50px;margin:10px;border:none;border-radius:12px}
.colors{display:grid;grid-template-columns:repeat(4,120px);gap:15px}
#ui{
 position:absolute;top:10px;left:50%;transform:translateX(-50%);
 background:rgba(0,0,0,.6);padding:10px 25px;border-radius:12px;
 color:white;font-size:26px;z-index:10
}
</style>
</head>
<body>

<div id="menu" class="menu">
 <h1>⚽ FUTEBOL 3D</h1>
 <button onclick="openColors()">JOGAR</button>
 <button onclick="location.reload()">SAIR</button>
</div>

<div id="colors" class="menu" style="display:none">
 <h1>COR PLAYER 1</h1>
 <div class="colors" id="c1"></div>
 <h1>COR PLAYER 2</h1>
 <div class="colors" id="c2"></div>
</div>

<div id="ui">0 x 0 | ⏱️ <span id="time">60</span></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
const cores=[
 {n:"Amarelo",c:0xffff00},
 {n:"Vermelho",c:0xff0000},
 {n:"Azul",c:0x0066ff},
 {n:"Verde",c:0x00aa44},
 {n:"Preto",c:0x000000},
 {n:"Branco",c:0xffffff},
 {n:"Roxo",c:0x8a2be2},
 {n:"Laranja",c:0xff8800},
];

let cor1,cor2,scene,camera,renderer;
let p1,p2,gk1,gk2,ball,ballVel=new THREE.Vector3();
let score1=0,score2=0,time=60,half=1;
let keys={};

cores.forEach(o=>{
 let b1=document.createElement("button");
 b1.style.background=`#${o.c.toString(16)}`;
 b1.innerText=o.n;
 b1.onclick=()=>{cor1=o.c;};
 c1.appendChild(b1);

 let b2=document.createElement("button");
 b2.style.background=`#${o.c.toString(16)}`;
 b2.innerText=o.n;
 b2.onclick=()=>{cor2=o.c;start();};
 c2.appendChild(b2);
});

function openColors(){
 menu.style.display="none";
 colors.style.display="flex";
}

function jogador(c){
 let g=new THREE.Group();
 let m=new THREE.MeshPhongMaterial({color:c});
 let body=new THREE.Mesh(new THREE.BoxGeometry(3,6,2),m);body.position.y=6;
 let head=new THREE.Mesh(new THREE.SphereGeometry(1.5,16,16),m);head.position.y=10;
 let arm=new THREE.Mesh(new THREE.BoxGeometry(1,4,1),m);
 let arm2=arm.clone();
 arm.position.set(-2.5,6,0);arm2.position.set(2.5,6,0);
 let leg=new THREE.Mesh(new THREE.BoxGeometry(1,5,1),m);
 let leg2=leg.clone();
 leg.position.set(-1,2.5,0);leg2.position.set(1,2.5,0);
 g.add(body,head,arm,arm2,leg,leg2);
 return g;
}

function start(){
 colors.style.display="none";

 scene=new THREE.Scene();
 camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,1000);
 camera.position.set(0,70,95);

 renderer=new THREE.WebGLRenderer({antialias:true});
 renderer.setSize(innerWidth,innerHeight);
 document.body.appendChild(renderer.domElement);

 scene.add(new THREE.DirectionalLight(0xffffff,1));

 let field=new THREE.Mesh(
  new THREE.PlaneGeometry(120,70),
  new THREE.MeshPhongMaterial({color:0x1e7a1e})
 );
 field.rotation.x=-Math.PI/2;
 scene.add(field);

 p1=jogador(cor1);
 p2=jogador(cor2);
 scene.add(p1,p2);

 gk1=jogador(0xffff00);gk1.scale.set(.7,.7,.7);
 gk2=jogador(0xffff00);gk2.scale.set(.7,.7,.7);
 scene.add(gk1,gk2);

 ball=new THREE.Mesh(
  new THREE.SphereGeometry(1.5,32,32),
  new THREE.MeshPhongMaterial({color:0xffffff})
 );
 ball.position.set(0,1.5,0);
 scene.add(ball);

 reset();
 setInterval(timer,1000);
 animate();
}

function reset(){
 ball.position.set(0,1.5,0);
 ballVel.set(0,0,0);
 if(half===1){
  p1.position.set(0,0,5);
  p2.position.set(0,0,-15);
 }else{
  p1.position.set(0,0,-15);
  p2.position.set(0,0,5);
 }
 gk1.position.set(0,0,32);
 gk2.position.set(0,0,-32);
}

function timer(){
 if(time>0){time--;timeSpan.innerText=time;}
 else if(half===1){half=2;time=60;reset();}
}

addEventListener("keydown",e=>keys[e.key]=true);
addEventListener("keyup",e=>keys[e.key]=false);

function update(){
 if(keys["w"])p1.position.z-=0.6;
 if(keys["s"])p1.position.z+=0.6;
 if(keys["a"])p1.position.x-=0.6;
 if(keys["d"])p1.position.x+=0.6;

 if(keys["ArrowUp"])p2.position.z-=0.6;
 if(keys["ArrowDown"])p2.position.z+=0.6;
 if(keys["ArrowLeft"])p2.position.x-=0.6;
 if(keys["ArrowRight"])p2.position.x+=0.6;

 ballVel.y-=0.15;
 ball.position.add(ballVel);
 ballVel.multiplyScalar(0.98);

 if(ball.position.y<1.5){ball.position.y=1.5;ballVel.y*=-0.6}
 if(Math.abs(ball.position.x)>58)ballVel.x*=-1;
 if(Math.abs(ball.position.z)>33)ballVel.z*=-1;

 gk1.position.x=THREE.MathUtils.lerp(gk1.position.x,ball.position.x,.05);
 gk2.position.x=THREE.MathUtils.lerp(gk2.position.x,ball.position.x,.05);

 if(ball.position.z<-34){score1++;reset();}
 if(ball.position.z>34){score2++;reset();}

 ui.innerText=`${score1} x ${score2} | ⏱️ ${time}`;
 camera.lookAt(ball.position);
}

function animate(){
 requestAnimationFrame(animate);
 update();
 renderer.render(scene,camera);
}
</script>
</body>
</html>
